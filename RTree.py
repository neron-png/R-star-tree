from RTreeNode import RTreeNode

data = [
    b'{"_":"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","cor":["41.5163899","26.5291294"],"id":"164574780","name":"Unknown"}',
    b'{"_":"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","cor":["41.5031784","26.5323722"],"id":"283711169","name":"Unknown"}',
    b'{"_":"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","cor":["41.5036382","26.5286010"],"id":"299263482","name":"\\u039f\\u03c1\\u03b5\\u03c3\\u03c4\\u03b9\\u03ac\\u03b4\\u03b1"}',
    b'{"_":"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","cor":["41.4950707","26.5030085"],"id":"299266545","name":"\\u039d\\u03ad\\u03bf\\u03c2 \\u03a0\\u03cd\\u03c1\\u03b3\\u03bf\\u03c2"}',
    b'{"_":"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","cor":["41.4963329","26.4929584"],"id":"301031648","name":"Unknown"}',
    b'{"_":"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","cor":["41.4974901","26.4891819"],"id":"301031649","name":"Unknown"}',
    b'{"_":"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","cor":["41.4982615","26.4871219"],"id":"301031652","name":"Unknown"}',
    b'{"_":"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","cor":["41.5022470","26.4775089"],"id":"301031655","name":"Unknown"}',
    b'{"_":"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","cor":["41.5045611","26.4720157"],"id":"301031656","name":"Unknown"}',
    b'{"_":"000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","cor":["41.5057181","26.4696125"],"id":"301031658","name":"Unknown"}']
other_data = [{
                  "_": "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                  "cor": ["41.5163899", "26.5291294"], "id": "164574780", "name": "Unknown"}, {
                  "_": "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                  "cor": ["41.5031784", "26.5323722"], "id": "283711169", "name": "Unknown"}, {
                  "_": "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                  "cor": ["41.5036382", "26.5286010"], "id": "299263482",
                  "name": "\\u039f\\u03c1\\u03b5\\u03c3\\u03c4\\u03b9\\u03ac\\u03b4\\u03b1"}, {
                  "_": "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                  "cor": ["41.4950707", "26.5030085"], "id": "299266545",
                  "name": "\\u039d\\u03ad\\u03bf\\u03c2 \\u03a0\\u03cd\\u03c1\\u03b3\\u03bf\\u03c2"}, {
                  "_": "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                  "cor": ["41.4963329", "26.4929584"], "id": "301031648", "name": "Unknown"}, {
                  "_": "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                  "cor": ["41.4974901", "26.4891819"], "id": "301031649", "name": "Unknown"}, {
                  "_": "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                  "cor": ["41.4982615", "26.4871219"], "id": "301031652", "name": "Unknown"}, {
                  "_": "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                  "cor": ["41.5022470", "26.4775089"], "id": "301031655", "name": "Unknown"}, {
                  "_": "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                  "cor": ["41.5045611", "26.4720157"], "id": "301031656", "name": "Unknown"}, {
                  "_": "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                  "cor": ["41.5057181", "26.4696125"], "id": "301031658", "name": "Unknown"}]
just_coords = [['41.5163899', '26.5291294'], ['41.5031784', '26.5323722'], ['41.5036382', '26.5286010'],
               ['41.4950707', '26.5030085'], ['41.4963329', '26.4929584'], ['41.4974901', '26.4891819'],
               ['41.4982615', '26.4871219'], ['41.5022470', '26.4775089'], ['41.5045611', '26.4720157'],
               ['41.5057181', '26.4696125']]
float_coords = [[41.5163899, 26.5291294], [41.5031784, 26.5323722], [41.5036382, 26.528601], [41.4950707, 26.5030085],
                [41.4963329, 26.4929584], [41.4974901, 26.4891819], [41.4982615, 26.4871219], [41.502247, 26.4775089],
                [41.5045611, 26.4720157], [41.5057181, 26.4696125]]


def decimalise(a: list) -> list:
    b = []
    for item in a:
        b.append([int(item[0] * 10 ** 10), int(item[1] * 10 ** 10)])
    return b

def z_order(*pointCoords, maxBitLen = None) -> int:
    """Computes the z-order index from coordinates in n dimensions

    :param (x, y, z ...): n-dimensional integer coordinates of point
    :param maxBitLen: None | Default, maximum size of outgoing z-number
    :return: number. the distance from (0, 0) to the point (x, y)
    """
    n = len(pointCoords)
    maxBitLen = sum([coord.bit_length() for coord in pointCoords])
    x = pointCoords[0]
    y = pointCoords[1]

    new_x = 0
    new_y = 0
    for i in range(0, maxBitLen // 2):
        new_x += ((x >> i) & 1) << ((i * 2))
        new_y += ((y >> i) & 1) << ((i * 2) + 1)

    z = new_x | new_y
    print(bin(z))
    return z


# structure = {
#     0: [{}, {}, {}],
#     1: [],
#     2: []
#             }

class Rtree():
    def __init__(self):
        self.root = RTreeNode(block_id=0)
        self.currentBlock = self.root  # This is a pointer!
        print(self.currentBlock)
        print(self.currentBlock.toBytes())


def run():
    coords = decimalise(float_coords)
    print(z_order(coords[0][0], coords[0][1]))
    print(z_order(6, 6))
